[TOC]

## 一、内部类为什么存在

定义：在一个类内部进行其他类的嵌套操作

1. 内部类可以访问该类定义所在作用域中的数据，包括 private 修饰的。
2. 内部类可以对同一包中的其他类隐藏起来。
3. 内部类可以实现 java 单继承的缺陷。
4. 当我们想要定义一个回调函数却不想写大量代码的时候我们可以选择使用匿名内部类来实现 。

## 二、内部类与外部类的关系

-  对于非静态内部类，内部类的创建依赖外部类的实例对象，在没有外部类实例之前是无法创建内部类的 。
-  内部类是一个相对独立的实体。
-  内部类可以直接访问外部类的元素**(包含私有域)，但是外部类不可以直接访问内部类的元素** ；
-  外部类可以通过内部类引用间接访问内部类元素 

## 三、四种内部类

### 1、成员内部类

1. 不能存在任何 static 变量和方法；
2. 成员内部类是依附于外部类的。

范例：在外部类外部创建内部类

```java
//外部类.内部类 内部类对象 = new 外部类().new 内部类();
Outter.Inner in = new Outter().new Inner();
```

范例：在外部类内部创建内部类

```java
Inner in = new Inner();
```

### 2、静态内部类

 静态内部类与非静态内部类之间存在一个最大的区别，我们知道非静态内部类在编译完成之后会隐含地保存着一个引用，该引用是指向创建它的外围类，但是静态内部类却没有。没有这个引用就意味着： 

1.  静态内部类的创建是不需要依赖于外部类，可以直接创建 ；
2.  **静态内部类不可以使用任何外部类的非 static 成员变量和方法，而内部类则都可以 。**

范例：使用 static 创建静态内部类

```java
//外部类.内部类 内部类对象 = new 外部类.内部类();
Outer2.Inner inner = new Outer2.Inner();
```

### 3、方法内部类

方法内部类定义在外部类的方法中，方法内部类和成员内部类基本一致，只是它们的作用域不同，方法内部类只能在该方法中被使用，出了该方法就会失效。 对于这个类的使用主要是应用与解决比较复杂的问题，想创建一个类来辅助我们的解决方案，到那时又不希望这个类是公共可用的，所以就产生了方法内部类。 

1.  局部内类不允许使用访问权限修饰符 public private protected 均不允许 ；
2.  局部内部类对外完全隐藏，除了创建这个类的方法可以访问它其他的地方是不允许访问的。 
3.  局部内部类要想使用方法形参，该形参必须用final声明(JDK8形参变为隐式final声明)；

### 4、匿名内部类

匿名内部类其实就是一个没有名字的方法内部类，所以它符合方法内部类的所有约束.除此之外，还有一些地方需要注意:

1. 匿名内部类是没有访问修饰符的；

2. 匿名内部类必须继承一个抽象类或者实现一个接口；

3. 匿名内部类中不能存在任何静态成员或方法，也不能有构造方法，因为它没有类名；

4. 与局部内部相同匿名内部类也可以引用方法形参。此形参也必须声明为 final

### 5、使用说明

 **内部类的使用暂时不作为设计的首选，内部类的特点如下** 

1.  破坏了程序的结构 ；
2.  方便进行私有属性的访问。（外部类也可以访问内部类的私有域） 
3.  如果发现类名称上出现了  ，应当立即想到内部类的概念。 